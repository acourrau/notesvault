services:
  api:
    build: .
    ports:
      - "8080:8080"
    volumes:
      - sqlite_data:/data
  test:
    profiles: ["test"]
    image: maven:3.9-eclipse-temurin-21
    working_dir: /app
    volumes:
      - ./:/app
      - m2_cache:/root/.m2
    command: ["bash", "-lc", "./mvnw clean test"]

volumes:
  sqlite_data:
  m2_cache: